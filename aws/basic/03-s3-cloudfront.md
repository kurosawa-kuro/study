より分かりやすい AWS CloudFront + S3 の静的ウェブサイトホスティングのチュートリアルを作成します。

# CloudFront + S3で静的ウェブサイトをホストするチュートリアル

## 前提条件
- AWSアカウントを持っていること
- 基本的なHTMLの知識があること

## 1. S3バケットの作成とファイルのアップロード

1. **S3バケットを作成**
   - S3コンソール(https://console.aws.amazon.com/s3/)にアクセス
   - [バケットを作成]をクリック
   - バケット名: 一意の名前を入力（例：`my-static-website-20241219`）
   - その他の設定: デフォルトのまま
   - [バケットを作成]をクリック
   - このバケットのブロックパブリックアクセス設定
   - パブリックアクセスをすべて ブロック  
     チェック 
2. **ファイルのアップロード**
   - 作成したバケットを選択
   - [アップロード]をクリック
   - index.htmlとその他必要なファイル（css、画像など）をアップロード
   - すべてのファイルはバケットのルートディレクトリに配置

## 2. CloudFrontディストリビューションの作成

1. **CloudFrontコンソールにアクセス**
   - CloudFrontコンソール(https://console.aws.amazon.com/cloudfront/)を開く
   - [Create Distribution]または[ディストリビューションの作成]をクリック

2. **基本設定**
   - オリジンドメイン: 作成したS3バケット(`my-static-website-20241219`)を選択
   - オリジンアクセス: 「オリジンアクセスコントロール設定(推奨) Origin access control settings (recommended)」を選択
   - 新しいOACを作成: デフォルト設定のまま作成
   - ウェブアプリケーションファイアウォール (WAF) 
      - セキュリティ保護を有効にする

3. **バケットポリシーの設定**
   - 表示される[S3バケットポリシーを更新する必要があります]の警告で[ポリシーをコピー]
   - S3バケットの設定画面に移動
   - [アクセス許可]タブ → [バケットポリシー]を選択
   - コピーしたポリシーを貼り付けて保存

## 3. 動作確認

1. **CloudFrontのドメイン名を確認**
   - CloudFrontコンソールでディストリビューションを選択
   - [全般]タブでディストリビューションドメイン名を確認
   - 例: `d1234abcdef.cloudfront.net`

2. **アクセステスト**
   - ブラウザで以下のURLにアクセス：
   - `https://[CloudFrontドメイン名]/index.html`
   - 例: `https://d1234abcdef.cloudfront.net/index.html`

## トラブルシューティング

ページが表示されない場合は、以下を確認：

1. **ファイルの配置**
   - index.htmlがバケットのルートにあるか
   - ファイル名が正確か（大文字小文字を含む）

2. **CloudFrontのキャッシュ**
   - 変更を加えた場合は無効化が必要
   - [無効化]タブで`/*`のパスで無効化を作成

3. **バケットポリシー**
   - CloudFrontが提供したポリシーが正しく適用されているか
   - シンタックスエラーがないか

## 補足：本番環境に向けて
- カスタムドメインの設定
- SSL証明書の設定
- キャッシュ設定の最適化
- エラーページのカスタマイズ

これで基本的な静的ウェブサイトのホスティングは完了です。各手順が明確で、順を追って実施できるようになっています。
