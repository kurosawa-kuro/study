# CloudFront + S3でウェブサイトを公開するチュートリアル

## はじめに
このチュートリアルでは、Amazon S3にウェブサイトのファイルを保存し、CloudFrontを使って安全に配信する方法を説明します。

## 前提条件
- AWSアカウントがある
- AWSマネジメントコンソールにログインできる

## 手順1：S3バケットの作成とファイルのアップロード

### S3バケットを作成する
1. [AWSマネジメントコンソール](https://console.aws.amazon.com/)を開く
2. サービス一覧から「S3」を選択
3. [バケットを作成]をクリック
4. バケットの基本設定：
   - バケット名：好きな名前（例：`my-website-files-2024`）
   - リージョン：東京（ap-northeast-1）
   - パブリックアクセス：すべてブロック（デフォルトのまま）
   - 他の設定：デフォルトのまま
5. [バケットを作成]をクリック

### ファイルをアップロードする
1. 作成したバケットを選択
2. [アップロード]をクリック
3. アップロードするファイル：
   - index.html（必須）
   - cssフォルダ（必要な場合）
   - 画像ファイル（必要な場合）
4. [アップロード]をクリック

## 手順2：CloudFrontの設定

### ディストリビューションを作成する
1. AWSマネジメントコンソールで「CloudFront」を選択
2. [ディストリビューションを作成]をクリック
3. 基本設定：
   - オリジンドメイン：作成したS3バケットを選択
   - オリジンアクセス：「オリジンアクセスコントロール設定」を選択
   - 新しいOACを作成：[作成]をクリック
   - WAF：「セキュリティ保護を有効にする」を選択
4. [作成]をクリック

### S3バケットのポリシーを設定する
1. 「S3バケットポリシーを更新する必要があります」の警告が表示される
2. [ポリシーをコピー]をクリック
3. S3バケットの設定画面に移動
4. [アクセス許可] → [バケットポリシー]を選択
5. コピーしたポリシーを貼り付けて[変更の保存]

## 手順3：動作確認

### ウェブサイトにアクセスする
1. CloudFrontのディストリビューション一覧から作成したものを選択
2. ドメイン名をコピー（例：`d1234abcdef.cloudfront.net`）
3. ブラウザで以下のURLにアクセス：
   `https://[ドメイン名]/index.html`

## うまくいかない場合のチェックリスト
- [ ] index.htmlはS3バケットの直下にあるか
- [ ] バケットポリシーは正しく設定されているか
- [ ] CloudFrontのデプロイは完了しているか
- [ ] ファイルの更新後にCloudFrontのキャッシュを消去したか

## サポート情報
- エラーが発生した場合：AWSサポートに連絡
- 請求に関する質問：[AWSの料金ページ](https://aws.amazon.com/jp/pricing/)を確認

以上で、CloudFrontとS3を使ったウェブサイトの公開は完了です。
